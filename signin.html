<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Sign In | HotelBooker</title>
  <link rel="stylesheet" href="style3.css" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
  <style>
    .form-grid label{display:block;margin:0 0 .25rem 0;font-weight:600}
    .form-grid input,.form-grid select{display:block;width:100%}
  </style>
  <script src="script3.js" defer></script>
  <script>
    document.addEventListener('DOMContentLoaded', function(){
      const form = document.getElementById('loginForm');
      form.addEventListener('submit', async function(e){
        e.preventDefault();
        const fd = Object.fromEntries(new FormData(form).entries());
        try {
          const res = await fetch('http://localhost/hotel-booker/backend/auth.php?action=login', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(fd)
          });
          const data = await res.json();
          if (data.success) {
            localStorage.setItem('user', JSON.stringify(data.user));
            window.location.href = 'index3.html';
          } else {
            alert(data.error || 'Login failed');
          }
        } catch(err) {
          alert('Error: ' + err.message);
        }
      });
    });
  </script>
</head>
<body>
  <header class="site-header">
    <div class="container header-grid">
      <a class="brand" href="index3.html">HotelBooker</a>
      <nav class="nav">
        <a href="index3.html#hotels">Hotels</a>
        <a href="index3.html#deals">Deals</a>
        <a href="index3.html#about">About</a>
      </nav>
    </div>
  </header>

  <main class="container" style="padding-top:3rem;padding-bottom:3rem;max-width:720px;">
    <section class="card" style="padding:2rem;">
      <div style="margin-bottom:1rem;">
        <h1 style="margin:0 0 .25rem 0;">Welcome back</h1>
        <p class="small" style="color:var(--muted);">Sign in to continue your booking and manage trips.</p>
      </div>
      <form id="loginForm" class="form-grid" aria-label="Sign in form" style="gap:1rem;">
        <label>Email
          <input type="email" name="email" autocomplete="email" required placeholder="you@example.com" aria-required="true">
        </label>
        <label>Password
          <input type="password" name="password" autocomplete="current-password" required placeholder="Your password" aria-required="true">
        </label>
        
        <div style="display:flex;align-items:center;justify-content:space-between;gap:2rem;border-top: 20px;">
          <button class="btn btn-primary" type="submit" style="min-width:140px;">Sign in</button>
          <span class="small">New here? <a href="signup.html">Create an account</a></span>
        </div>
      </form>
    </section>
  </main>

  <footer class="site-footer">
    <div class="container footer-grid">
      <div>
        <strong>HotelBooker</strong>
        <p>Â© <span id="year"></span></p>
      </div>
      <nav class="fnav">
        <a href="#">Help</a>
        <a href="#">Terms</a>
        <a href="#">Privacy</a>
      </nav>
    </div>
  </footer>
</body>
</html>
